## 😋 목차

1. 네트워크의 기초
2. TCP/IP 4계층 모델

## 🍚 1. 네트워크의 기초
>네트워크란 `노드`와 `링크`가 서로 연결되어 있거나 연결되어 있지 않은 집합체입니다. 
여기서 노드는 `서버`, `라우터`, `스위치` 등 네트워크 장치를 뜻하며, 링크는 유무선 형태의 연결 수단을 의미합니다.

### 🥞 처리량과 지연 시간

네트워크를 구축할 때, "좋은 네트워크" 로 만드는 것이 중요합니다.
***좋은 네트워크란***?
1. 많은 처리량
2. 지연 시간이 짧다.
3. 장애 빈도가 적다.
4. 좋은 보안을 갖춘 네트워크

#### 🍔 처리량 (throughput)

- 링크를 통해 전달되는 단위 시간당 데이터양 (amount of data per unit time)을 뜻한다.
- bps (bits per second)를 단위로 사용
- 트래픽, 장치 간의 대역폭, 에러, 하드웨어 스펙 등에 영향을 받는다.

#### 🍟 지연 시간 (latency)

- 요청이 처리되는 시간. 즉, 어떤 메세지가 두 장치 사이를 왕복하는데 걸린 시간
- 매채 타입 (유무선), 패킷 크기, 라우터의 패킷 처리 시간 등에 영향을 받는다.

### 🥓 네트워크 토폴로지와 병목 현상

`노드`와 `링크`가 어떻게 배치되어 있는지에 대한 방식이자 연결 형태를 뜻한다.

![](https://velog.velcdn.com/images/oyunseong/post/e7b735ee-905f-49da-b8bd-da7b7cd24cd8/image.png) 사진 출처 : 위키백과
대표적인 토폴로지 5개의 설명은 아래와 같습니다. 
#### 😀 1. 트리 토폴로지
  - 계층 형태로 네트워크가 존재합니다.
  - 노드의 추가, 삭제가 쉽고, 특정 노드에 장애가 발생 시 하위 노드도 영향을 받습니다.
#### 😁 2. 버스 토폴로지
  - 중앙 통신 회선 하나에 여러 개의 노드가 연결되는 방식으로 보통 LAN에서 사용됩니다.
  - 설치 비용이 적습니다.
  - 신뢰성이 우수합니다.
  - 노드를 추가하거나 삭제하기 쉽습니다.
  - 특정 노드에 장애가 발생하여도 다른 노드에 영향을 미치지 않습니다.
  - 스푸핑이 가능하다는 치명적인 단점이 있습니다. 
  ※ `LAN`(Local Area Network) : 근거리 통신망
  ※ `스푸핑`, spoofing : 사전적 의미는 '속이다'입니다. 네트워크에서 스푸핑 대상은 MAC 주소, IP주소, 포트 등 네트워크 통신과 관련된 모든 것이 될 수 있고, 스푸핑은 속임을 이용한 공격을 총칭합니다.
#### 😉 3. 스타 토폴로지
  - 중앙에 있는 노드 하나에 다른 모든 노드가 연결되어 있는 형태
  - 노드를 추가하거나 삭제하기 쉽고습니다.
  - 패킷의 충돌 발생 가능성이 적습니다.
  - 특정 노드에 장애가 발생해도, 다른 노드에 영향을 미치지 않습니다. (단, 중앙노드는 제외입니다)
  - 중앙 노드에 장애가 발생 시, 시스템 전체에 장애가 발생합니다.
  - 설치 비용이 비쌉니다...
#### 😊 4. 링형 토폴로지
  - 각각의 노드가 양 옆의 두 노드와 연결되는 방식으로, 둥근 원 형태로 네트워크가 구성되는 형태입니다.
  - 노드 수가 추가되어도 네트워크상의 손실이 거의 없습니다.
  - 충돌이 발생되는 가능성이 적습니다.
  - 노드의 장애를 쉽게 발견할 수 있습니다.
  - 노드를 추가하거나 삭제가 어렵습니다.
  - 노드 하나에 장애 발생 시, 시스템 전체에 장애가 발생합니다.
#### 😄 5. 메시 (mesh) 토폴로지
  - 모든 노드가 그물망처럼 연결되어 있는 형태입니다.
  - 노드 하나에 장애 발생 시, 시스템에 영향을 거의 끼치지 않습니다.
  - 트래픽의 분산 처리가 가능합니다.
  - 노드를 추가하거나 삭제가 어렵습니다.
  - 운영 비용이 고가입니다.

추가적으로 스푸핑과 연관된 개념 중에 스니핑이 있습니다.
스니핑과 스푸핑을 이용한 다양한 공격들이 있스빈다.
스니핑 공격은 스니퍼를 이용하여 네트워크상의 데이터를 도청하는 행위를 말합니다. 
대표적인 스푸핑 공격은 아래와 같습니다.
- ARP 스푸핑 : 
근거리 통신망 하에서 주소 결정 프로토콜 메시지를 이용하여 상대방의 데이터 패킷을 중간에서 가로채는 중간자 공격 기법이다. 로컬에서 통신하고 있는 서버와 클라이언트의 IP 주소에 대한 2계층 MAC 주소를 공격자의 MAC 주소로 속임으로써 클라이언트에서 서버로 가는 패킷이나, 서버에서 클라이언트로 가는 패킷이 공격자에게 향하게 하여 랜의 통신 흐름을 왜곡시키는 방법이다.

- IP 스푸핑
- DNS 스푸핑


### 🙄 병목현상이란?
> 전체 시스템의 성능이나 용량이 하나의 구성 요소로 인해 제한을 받는 현상을 말합니다.

예를 들어 병의 몸통보다 병의 목 부분 내부 지름이 좁아서 물이 상대적으로 천천히 쏟아지는 것에 비유할 수 있습니다. 서비스에서 이벤트가 열렸을 때, 단 시간에 트래픽이 증가하고, 토폴로지의 설계가 적절하지 못하다면 사용자가 접속을 하지 못하는 문제가 발생합니다. 

### 🙃 네트워크 분류

네트워크는 규모를 기반으로 분류할 수 있습니다.
크게 3가지로 분류됩니다. 
1. 사무실과 개인 규모에서 사용할 수 있는 LAN (Local Area Network)
2. 도시 정도 규모의 MAN (Metropolitian Area Network)
3. 세계 규모의 WAN (Wide Area Network)

- LAN
  - 근거리 통신망
  - 전송 속도가 빠르고 혼잡하지 않습니다.
- MAN
  - 대도시 지역 네트워크
  - 전송 속도는 평균이며 LAN보다는 혼잡합니다.
- WAN
  - 광역 네트워크
  - 전송 속도는 낮으며 MAN보다 더 혼잡합니다.
  
속도, 혼잡도 비교 
  LAN > MAN > WAN 

### 🥱 네트워크 성능 분석 명령어

애플리케이션 코드상으로는 문제가 없어도, 네트워크 상태에 따라 데이터를 가져오지 못 하는 등의 장애가 발생하는 경우가 있습니다. 이는 네트워크 병목이 원인일 수 있습니다. 네트워크 병목 현상의 주된 원인은 아래와 같습니다. 

- 네트워크 대역폭
- 네트워크 토폴로지
- 서버 CPU, 메모리 (자원) 사용량
- 비효율적인 네트워크 구성

위와 같은 경우 네트워크의 상태를 확인하기 위해 아래와 같은 명령어를 사용합니다. 

- ping
  - Packet INternet Groper
  - 목적지 노드까지의 네트워크 상태를 확인하기 위해 일정 크기의 패킷을 전송
  - TCP/IP 프로토콜 중 ICMP 프로토콜을 통해 동작
- netstat
  - 접속되어 있는 서비스들의 네트워크 상태를 표시 (network status)
  - 주로 서비스의 포트가 열려 있는지 확인할 때 사용합니다.
- nslookup
  - 특정 도메인에 매핑된 IP를 확인합니다.
- tracert (traceroute)
  - 목적지 노드까지의 네트워크 경로를 확인합니다.
  - 느려지는 특정 구간을 파악할 수 있습니다.

### 🍇 네트워크 프로토콜 표준화

- 장치들 간에 데이터를 주고받기 위한 공통 `인터페이스`
- IEEE 또는 IETF에서 표준을 정합니다.
- 예:
  - IEEE802.3: 유선 LAN 프로토콜
  - HTTP: 웹 애플리케이션 계층에서 데이터를 주고 받기 위한 프로토콜

## 🍙 2. TCP/IP 4계층 모델

>Internet Protocol Suite는 인터넷에서 컴퓨터들이 서로 정보를 주고받는 데 쓰이는 프로토콜의 집합입니다.
TCP/IP 4,6계층 모델, OSI 7계층 모델 등이 특히 널리 쓰인다.  

#### 계층 모델이란?
네트워크에서 사용되는 통신 프로토콜의 집합으로입니다.
TCP/IP 4계층 모델의 계층들은 프로토콜의 네트워킹 범위에 따라 네 개의 추상화 계층으로 구성된다.

### 🥞 계층 구조

TCP/IP 4계층 모델은 이름 그대로 4개의 계층으로 나뉩니다.

- 애플리케이션 계층 (FTP, HTTP, SSH, SMTP, DNS)
- 전송 계층 (TCP, UDP, QUIC)
- 인터넷 계층 (IP, ARP, ICMP)
- 링크 계층 (Ethernet)

### 🍱 애플리케이션 계층

- HTTP, FTP 등 응용 프로그램이 사용되는 프로토콜 계층
- 웹 서비스, 이메일, 동영상 스트리밍 등 서비스를 실질적으로 사용되는 사람들에게 제공하는 층

### 🧀 전송 (transport) 계층

- 송신자와 수신자를 연결하는 통신 서비스를 제공합니다.
- 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어 등 다양한 기능을 제공합니다.
- 대표적인 `TCP`, `UDP`가 이 계층에 속합니다.
- TCP (Transmission Control Protocol)란?
  - 가장 널리 쓰이는 전송 계층 프로토콜입니다. 현재 HTTP 2.0까지는 TCP를 사용한다.
  - 패킷 사이의 순서를 보장하고, 연결을 통한 신뢰성 구축 (3way handshake) 등 다양한 기능을 제공합니다.
  - UDP에 비해 속도가 느리다는 단점이 있습니다. 
- UDP (User Datagram Protocol)란?
  - 기본적으로 제공하는 기능이 적지만, 필요한 경우 커스터마이징 해서 사용할 수 있습니다.
  - 패킷 사이의 순서 보장, 수신 여부 확인 등이 지원되지 않습니다.
#### TCP와 UDP 비교
1. `TCP`는 전송 순서 보장, 수신 여부 확인, 논리적 연결 수립/해제 등 안정성과 신뢰성을 강점으로 갖고 있습니다. 
    - 기본적으로 메일 송수신, 파일 전송 등 속도보다 정확한 전달이 중요한 경우에 사용됩니다.
    - 최근에는 동영상 스트리밍 등에도 TCP가 널리 사용되고 있습니다.
    
2. `UDP`는 TCP 대비 빠른 속도를 강점으로 갖습니다.
    - 3way handshake 같은 논리적 연결 과정이 별도로 없으므로 빠릅니다.
    - TCP에 비해 기본적으로 요구하는 값이 적어 속도가 빠릅니다. 
- 3way handshake
![](https://velog.velcdn.com/images/oyunseong/post/bf9b835c-7720-41d0-a3f2-8aa3d29cf19e/image.png)
사진 출처 : 위키피디아

  - TCP에서 서버와 클라이언트 사이에 서로 연결을 논리적으로 수립하는 과정
  - 아래 과정을 통해 진행된다.
    - Client -> Server SYN 전송
    - Server는 SYN 수신에 대한 응답으로 SYN + ACK 전송
    - Client는 SYN 수신에 대한 응답으로 ACK 전송

### 🥩 인터넷 (Internet) 계층

- 장치로부터 받은 패킷을 지정된 목적지로 전송하기 위해 사용되는 계층입니다.
- IP 등이 존재하며, 패킷 수신자 주소를 지정하여 데이터를 전달합니다.

### 🍖 링크 계층

- 전선, 광섬유, 무선 등 실질적으로 데이터를 전달하며 장치 간에 신호를 주고받는 규칙을 정하는 계층입니다.
- `물리 계층`과 `데이터 링크` 계층으로 나뉩니다. 

### 🍗 계층 간 데이터 송수신 과정

- 데이터 전송 시, 아래 순서로 프로토콜이 포장된다.
  - 애플리케이션 -> 전송 -> 인터넷 -> 링크
- 데이터 수신 시, 아래 순서로 프로토콜의 포장을 풀어낸다.
  - 링크 -> 인터넷 -> 전송 -> 애플리케이션
- "포장"을 뜻하는 고상한 표현 - 캡슐화 (encapsulation)
  - 객체지향의 캡슐화와 동일하지는 않지만 유사한 정의를 가진다
  - 상위 계층의 헤더와 데이터 내용을 하위 계층의 데이터에 포함시키는 것

### 🍘 PDU
>네트워크의 계층 간 데이터가 전달될 때, 한 덩어리의 단위를 PDU (Protocol Data Unit)이라고 합니다. 

제어 관련 정보를 포함하는 `헤더`, 데이터를 뜻하는 `페이로드` 등이 존재하며, 계층마다 이를 부르는 이름이 다릅니다. 

-- 작성 중 --
