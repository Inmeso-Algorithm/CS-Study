# 2.1 네트워크의 기초
네트워크란 노드(Node)와 링크(Link)가 서로 연결되어 있거나 연결되어 있지 않은 집합체를 의미합니다. 여기서 노드는 서버, 라우터, 스위치 등의 장치를 의미하고 링크는 그것들이 유/무선으로 연결되어있음을 뜻합니다.
## 2.1.1 처리량과 지연 시간
좋은 네트워크를 구축하기 위해서는, 많은 처리량을 처리할수 있고 지연시간이 짧으면 보안성이 우수한 네트워크를 뜻합니다.
1. 처리량
- 처리량(Throughput)이란, 링크를 통해 전달되는 단위 시간당 데이터양을 말합니다.
2. 지연 시간
- 지연 시간(Latency)이란 요청이 처리되는 시간을 말하며 어떤 메시지가 두 장치 사이를 왕복하는 데 걸린 시간을 말합니다.
---
## 2.1.2 네트워크 토폴로지와 병목 현상
네트워크 토폴로지(Network topology)는 컴퓨터 네트워크의 구성요소들인 링크와 노드가 연결되어있는 방식 또는 연결 형태를 의미합니다. 여러 종류의 네트워크 토폴로지가 있고 이들마다의 장단점이 있습니다.
1. 트리 토폴로지
- 트리 토폴로지(Tree topology)는 계층형 토폴로지라고 하며 그래프 이론에서의 트리와 같은 형태로 배치한 네트워크 구성을 말합니다.
- 장점으로는 네트워크의 확장과 제거가 쉽고, 회선수가 절약된다는 점이 있습니다.
- 단점으로 상위 노드에 문제가 생겻을 때, 그 노드의 하위 노드들도 모두 영향을 받는다는 점이 있습니다.
2. 버스 토폴로지
- 버스 토폴로지(Bus topology)는 하나의 중앙 회선에 여러개의 노드들이 연결되어 있는 형태를 가진 네트워크 구성을 말합니다.
- 장점으로는 구축에 용이하고, 하나의 케이블에 연결하므로 설치 비용이 절감되며, 확장과 삭제에 유연하며, 트리 토폴로지와 달리 하나의 노드에 문제가 생겨도 다른 노드에 영향이 없다는 점이 있습니다.
- 단점으로는 케이블에 문제가 생겼을 때 모든 노드가 영향을 받고, 스푸핑의 위험에 노출되어 있습니다. 또한 노드에 문제가 생겼을때 어떤 노드가 문제가 있는지 찾아내기 어렵다는 점이 있습니다.
### 스푸핑이란?
스푸핑(spoofing)은 LAN상에서 송신부의 패킷을 송신과 관련 없는 다른 호스트에 가지 않도록 하는 스위칭 기능을 마비시키거나 속여서 특정 노드에 해당 패킷이 오도록 처리하는 것을 말합니다.   

3. 스타 토폴로지
- 스타 토폴로지(Star topology)는 중앙의 노드에 다른 모든 노드들이 연결된 네트워크 구성 형태입니다. 
- 장점으로는 노드의 추가와 에러의 탐지가 쉽고 패킷 충돌의 가능성이 적습니다. 또한 중앙 이외의 노드의 오류가 다른 노드에 영향을 끼치지 않는다는 점이 있습니다
- 단점으로는 중앙 노드에 장애가 발생하면 전체 네트워크를 사용할 수 없고 설치 비용이 고가입니다.
1. 링형 토폴로지
- 링형(Ring topology)는 각각의 노드가 양 옆의 두 노드와 연결하여 전체적으로 고리처럼 하나의 연속된 길을 통해 통신을 하는 망 구성방식입니다.
- 장점으로는 노드 수가 증가되어도 패킷 손실이 적고 총돌이 적으며 노드의 고장도 쉽게 색출이 가능하는 점입니다.
- 단점으로는 네트워크의 구성 변경이 어렵고 한 회선에 문제가 생기면 전체 네트워크에 영향이 간다는 점이 있습니다.
5. 메시 토폴로지
- 메시 토폴로지(Mesh topology)는 망형 토폴로지라고도 하며 그물망처럼 연결되어 있는 구조입니다.
- 장점으로는 한 노드에 고장이 발생해도 여러 경로가 존재하므로 네트워크를 계속 사용할 수 있고 트래픽의 분산 처리가 가능하다는 점 입니다.
- 단점으로는 노드의 추가가 어렵고 많은 링크를 필요로 하기 때문에 구축 비용과 운용 비용이 고가라는 점이 있습니다.
### 병목 현상
병목 현상이란
- 병목(Bottleneck) 현상은 전체 시스템의 성능이나 용량이 하나의 구성 요소로 인해 제한을 받는 현상을 뜻합니다.   

병목 현상과 네트워크 토폴로지의 관계
- 네트워크 토폴로지가 중요한 이유는 병목 현상을 찾을 때 중요한 기준이 되기 때문입니다. 한 노드에 트래픽이 집중되거나 해당 노드에 문제가 있어 지연 시간이 비정상적으로 긴 경우가 발생했을 때 토폴로지를 파악하지 못했다면 아무리 대역폭을 늘려도 문제를 해결 할 수 없을 것입니다. 
---
## 2.1.3 네트워크 분류
네트워크는 규모를 기준으로 분류 할 수 있습니다. 크기에 따라 내림차순으로 WAN, MAN, LAN으로 나뉠 수 있으며 각각 Wide Area Network, Metropolitan Area Network, Local Area Network의 약자입니다.

---
## 2.1.4 네트워크 성능 분석 명령어
네트워크 상태에 문제가 있어 애플리케이션상에서는 아무런 문제가 없음에도 불구하고 사용자가 서비스로부터 데이터를 가져오지 못하는 상황이 발생할 수도 있습니다. 이때, 네트워크 상태를 진단할 수 있는 명령어들이 있습니다.
1. ping
-ping(Packet Internet Groper)은 네트워크 상태를 확인하려는 대상 노드를 향해 특정 크기의 패킷을 전송하는 명령어입니다. 이 명령어를 통해 보내는 노드까지의 네트워크가 연결되어 있는지, 패킷을 주고 받는 시간은 얼마나 걸렸는지 등을 알 수 있습니다.
2. netstat
- netstat 명령어는 접속되어 있는 서비스들의 네트워크 상태를 표시하는 데 사용되며 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트를 보여줍니다.
3. nslookup
- nslookup 명령어는 DNS에 관련된 내용을 확인하기 위해 쓰는 명령어입니다. 특정 도메인에 메핑된 IP를 확인하기 위해 사용합니다.
4. tracert
- 윈도우에서는 tracert, 리눅스에서는 traceroute라는 명령어로 구동됩니다. 이 명령어는 목적지 노드까지의 네트워크 경로를 확인할 때 사용하는 명령어입니다. 목적지 노드까지의 구간들 중 어느 구간에서 혼잡이 발생하는지 등을 알아낼 수 있습니다.

---
## 2.1.5 네트워크 프로토콜 표준화
네트워크 프로토콜이란 다른 장치들끼리 데이터를 주고받기 위해 설정된 공통된 인터페이스를 말합니다. 대표적인 네트워크 프로토콜로 http가 있습니다. http 프로토콜로 약속된 인터페이스를 통해 웹 서비스를 기반으로 데이터 송수신이 가능해지는것입니다.

---
# 2.2 TCP/IP 4계층 모델
인터넷 프로토콜 스위트(Internet protocol suite)는 인터넷 프로토콜들의 집합이며, 이를 OSI 7계층(OSI 7 layer) 또는 TCP/IP 4계층 모델로 설명합니다.
## 2.2.1 계층 구조
TCP/IP 4계층은 특정 계층이 다른 계층에 영향을 끼치지 않도록 설계되었습니다. 이로써 한 계층의 프로토콜이 변경되더라도 다른 계층까지 바꿀 필요가 없이 유연하게 설계된 것입니다.
### 애플리케이션 계층
애플리케이션 계층(Application layer)은 사용자가 실제로 사용하는 응용 프로그램이 사용하는 프로토콜 계층입니다.
### 전송 계층
전송 계층(Transport layer)은 송수신자를 서로 연결하는 프로토콜을 담당하는 계층입니다. 대표적으로 TCP와 UDP가 있습니다.
1. TCP
- TCP 프로토콜은 패킷 사이의 순서를 보장하고 연결지향 프로토콜을 사용해서 신뢰성을 보장하는 프로토콜입니다.
2. UDP
- UDP 프로토콜은 순서와 신뢰성을 보장하지 않고 단순히 데이터만 주고 받는 프로토콜입니다.
### TCP 연결 성립 과정
TCP는 연결의 신뢰성을 보장하는 작업으로 3-way handshake라는 작업을 진행합니다
1. SYN
- 가장 먼저 클라이언트가 서버로 특정한 정보가 담겨져 있는 패킷을 보냅니다. 이 패킷에는 ISN이라는 번호가 있는데, 보낼 때 임의로 정해져서 보내지고 이후 이 ISN을 이용해 클라이언트와 서버가 서로의 데이터를 주고 받았음을 확인합니다
2. SYN + ACK
- 클라이언트로부터 SYN을 받은 서버는 클라이언트에게 SYN을 보냄과 동시에 클라이언트가 받은 SYN을 받았다는 의미로 ACK을 같이 보내게 됩니다. 이 ACK에는 SYN의 ISN에 1을 더한 숫자가 ISN으로써 보내지게 됩니다.
3. ACK
- 서버의 SYN + ACK을 받은 클라이언트는 최종적으로 서버가 보낸 SYN에 대한 ACK을 보냄으로써 서버의 SYN을 정상적으로 받았음을 알립니다. 이 경우 역시 서버의 SYN에 있는 ISN에 1을 더한 숫자를 ACK안에 ISN으로 보냅니다.

TCP 프로토콜에서는 위와 같은 과정으로 서버와 클라이언트간의 신뢰성을 구축하고 데이터 송수신을 시작합니다. 하지만 UDP에서는 이러한 과정이 없어 신뢰성이 없는 프로토콜이라고 합니다.

### 인터넷 계층
인터넷 계층(Internet layer)은 장치로부터 받은 네트워크 패킷을 지정된 목적지로 전송하기 위해 사용되는 계층입니다. IP, ARP, ICMP등의 프로토콜이 있으며 패킷을 수신해야 할 상대의 주소를 지정하여 데이터를 전달합니다.

### 링크 계층
링크 계층(Link layer)은 전선, 광섬유, 무선 등으로 실질적으로 데이터를 전달하며 장치 간에 신호를 주고 받는 프로토콜이 있는 계층입니다.
## 2.2.2 PDU