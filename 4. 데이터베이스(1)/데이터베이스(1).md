# 4. 데이터베이스
## 4.1 데이터베이스의 기본
데이터베이스는 구조화된 정보 또는 데이터의 조직화된 모음입니다. 데이터베이스를 제어하는 시스템을 데이터베이스 관리 시스템(DBMS, DataBase Management System)이라고 합니다. 

![image](https://user-images.githubusercontent.com/103945439/189802014-142f8b4d-4727-4116-bcbf-36714273de9c.png)

데이터베이스와 DBMS사이의 관계를 표현한 사진. DBMS에는 대표적으로 MySQL과 PostgreSQL등 이 있습니다.

---

### 4.1.1 엔터티
엔터티(entity)는 사람, 장소, 물건 등과 같이 여러 개의 속성을 가지는 명사를 의미합니다.

각 엔터티는 자신을 표현하거나 설명할 수 있는 속성(Attribute)을 가집니다. 예를 들어, 회원이라는 엔터티가 있다면 이름과 아이디와 같은 속성을 가질것입니다.   

*약한 엔터티와 강한 엔터티*
> 엔터티에는 약한 엔터티(weak entity)와 강한 엔터티(strong entity)가 있습니다. 강한 엔터티는 다른 엔터티의 의존없이 독립적으로 존재하는 반면, 약한 엔터티는 독립적으로 존재하지 못하고 다른 강한 엔터티에 종속적입니다.
---

### 4.1.2 릴레이션
릴레이션(relation)은 데이터베이스에서 정보를 구분하여 저장하는 기본 단위입니다. 릴레이션은 관계형 데이터베이스에서는 테이블이라고 하며, NoSQL 데이터베이스에서는 컬렉션이라고 합니다.

---

### 4.1.3 속성
속성은 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보입니다. 엔터티의 속성이 될 수 있는 것은 많지만 이중에서 서비스에 필요한 정보로 이루어진 속성만이 엔터티의 속성이 됩니다.

---

### 4.1.4 도메인
도메인(domain)이란 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합을 말합니다. 예를 들어, 성별이라는 속성이 있다면 이 속성이 가질수 있는 값은 {남, 여} 라는 집합이 됩니다. 

---

### 4.1.5 필드와 레코드
위에서 설명된 개념을 바탕으로 데이터베이스 테이블을 만들 수 있습니다. 테이블은 엔터티를 속성으로 구분해 필드를 구성하고 이 테이블에 행 단위의 데이터를 레코드 또는 튜플이라고 합니다.

데이터베이스의 속성에는 그에 맞는 데이터 타입을 정의해야합니다. 


![image](https://user-images.githubusercontent.com/103945439/189811295-a6f60dc7-5ba5-4bed-8128-60a702060f5b.png)

PostgreSQL에서의 여러가지 속성 타입들을 설명한 그림

---

### 4.1.6 관계
데이터베이스는 테이블의 집합이라고 할 수 있습니다. 이러한 테이블들은 서로의 관계가 정의되어 있고 관계 화살표로 나타낼 수 있습니다.

**1:1 관계**   
1:1 관계는 두 테이블 간의 관계가 일대일 대응이 되는것을 의미합니다. 1:1 관계는 테이블을 두 개의 테이블로 나눠 테이블의 구조를 더 이해하기 쉽게 만들어 줍니다.

![image](https://user-images.githubusercontent.com/103945439/190380091-2488b163-446e-4d0a-a92a-df6e40e78bf0.png)

>위 사진과 같은 데이터들이 주어졌을 때, 영화와 감독이라는 두 테이블의 관계는 1:1입니다. 한 영화에는 한 명의 감독이 있기 때문입니다.

**1:N 관계**   
1:N 관계는 한 개체가 다른 많은 개체를 포함하는 관계를 말합니다

![image](https://user-images.githubusercontent.com/103945439/190381282-1a6ad56e-f5c5-4380-86c3-7b42c187b249.png)

>위 사진과 같이 영화 또는 배우와 이들의 수상 경력 사이의 관계는 1:N 관계라고 할 수 있습니다. 한 영화 또는 배우가 여러가지의 상을 받는 것이 가능하기 때문입니다.

**M:N 관계**   
M:N 관계에서는 여러 개체와 여러 개체가 서로 이어진 관계를 뜻합니다.


### 4.1.7 키
테이블 간의 관계를 조금 더 명확하게 하고 테이블 자체의 인덱스를 위해 설정된 장치로 그 특성에 따라 다양한 키들로 나뉩니다.

![image](https://user-images.githubusercontent.com/103945439/190386361-35214ca6-0361-4e7f-9d93-e1c126d60463.png)

#### 기본키
기본키(Primary key)는 줄여 PK 또는 프라이머리키 라고 많이 부르며, 유일성과 최소성을 만족하는 키 입니다. 기본키는 자연키 또는 인조키 중 하나로 선택합니다.

![image](https://user-images.githubusercontent.com/103945439/190386550-ed9f5313-0110-42c4-86d0-d4b0578bd712.png)

1. 자연키
- 자연키는 테이블을 만들 때 개체의 속성이 자체적으로 유일성과 최소성을 만족하는 키 입니다. 사람을 예로 들었을 때 주민등록번호는 자연키라고 할 수 있습니다.
2. 인조키
- 인조키는 자연키와 대조적으로 인위적으로 유일성과 최소성을 만족하게끔 고유한 식별번호 등을 붙인 키 입니다. 자연키와 비교했을때 변하지 않기때문에 대부분의 경우 기본키로 인조키가 많이 쓰입니다.

#### 외래키
외래키(Foreign key)는 다른 테이블의 기본키를 그대로 참조하는 값으로 개체와의 관계를 식별하는데 사용합니다.

![image](https://user-images.githubusercontent.com/103945439/190385998-d1260ca1-f998-43d0-bf8a-f3c16eeccbf9.png)

#### 후보키
후보키(Candidate key)는 기본키가 될 수 있는 후보들이며 유일성과 최소성을 동시에 만족하는 키 입니다.

#### 대체키
대체키(Alternate key)는 후보키가 두 개 이상일 경우 어느 하나를 기본키로 지정하고 남은 후보키들을 말합니다.

#### 슈퍼키
슈퍼키(Super key)는 유일성을 갖춘 키 입니다.